<!DOCTYPE html>
<html>
	<head>
		<title>Easycalc</title>
		<meta content="text/html; charset=utf-8" http-equiv="content-type">
		<meta content="Easy hygiene cost estimate tool" name="description">
		<meta content="KERSIA, product calculator" name="keywords">
		<link href="images/easycalc-favicon.ico" rel="shortcut icon">
		<link href="lib/calendar-dark.css" rel="stylesheet">
		<style>
			@import url("lib/easycalcag.css");
		</style>
		<script src="lib/jquery.min.js"></script>
		<script>
			if (!window.jQuery) {
				window.$ = window.jQuery = require('jquery');

				const { ipcRenderer } = require('electron');
				const notification = document.getElementById('notification');
				const message = document.getElementById('message');
				const restartButton = document.getElementById('restart-button');

				ipcRenderer.on('update_available', () => {
					ipcRenderer.removeAllListeners('update_available');
					message.innerText = 'A new update is available. Downloading now...';
					notification.classList.remove('hidden');
				});

				ipcRenderer.on('update_downloaded', () => {
					ipcRenderer.removeAllListeners('update_downloaded');
					message.innerText = 'Update Downloaded. It will be installed on restart. Restart now?';
					restartButton.classList.remove('hidden');
					notification.classList.remove('hidden');
				});

				function closeNotification() {
					notification.classList.add('hidden');
				}

				function restartApp() {
					ipcRenderer.send('restart_app');
				}
			}
		</script>
		<script src="lib/jquery-plugins.js"></script>
		<script src="lib/product-img.js"></script>
		<script src="lib/easycalcag.js"></script>
	</head>
	<body>
		<div id="notification" class="hidden">
			<p id="message"></p>
			<button id="close-button" onClick="closeNotification()">
				Close
			</button>
			<button id="restart-button" onClick="restartApp()" class="hidden">
				Restart
			</button>
		</div>
	</body>
</html>